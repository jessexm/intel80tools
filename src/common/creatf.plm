creatf: DO;
$include(:f3:creatf.ipx)

/* creatF(file$p, buf$p, size$w, mode$b)
   set files buffer and buffer size
   read into buffer if mode$b =    1
*/

creatf: PROCEDURE(fp, buf, bsize, mode) public;
	DECLARE (fp, buf, bsize) ADDRESS, mode BYTE;
	DECLARE file BASED fp FILE$T;

	file.buf$p = buf;
	file.bsize = bsize;
	if mode = 1 then
		call readf(fp, buf, bsize, .file.actual);
	file.curoff = 0;
end;

END;
